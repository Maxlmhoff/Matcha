<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Your Profile</title>
     <%- css.style %>
</head>     
<body background=../background2.png>
<% include header.ejs %>
<% if (typeof error !== 'undefined' && error && error !== 'none') { 
    %> <div id=error><strong>Error: <%- error %></strong></div> <% } %>
    <% if (typeof success !== 'undefined' && success) { 
    %> <div id=success><strong>Success: <%- success %></strong></div> <% } %>
    <h1 style="color:darkviolet;"> Your profile </h1>
    <div class="profile">
        <h3>Your pictures</h3>
    <div class="pictures">
       <form action="/new_img" method="post" enctype="multipart/form-data">
            <img src="<%- profile.img1 %>" width="300" height="200"><BR \>
            <input type=file name=file accept=".jpg, .jpeg, .png" required>
            <input type=submit name=img1 value="Upload Image">
       </form>
       <form action="/new_img" method="post" enctype="multipart/form-data">
            <img src="<%- profile.img2 %>" width="300" height="200"><BR \>
            <input type=file name=file accept=".jpg, .jpeg, .png" required>
            <input type=submit name=img2 value="Upload Image">
       </form>
       <form action="/new_img" method="post" enctype="multipart/form-data">
            <img src="<%- profile.img3 %>" width="300" height="200"><BR \>
            <input type=file name=file accept=".jpg, .jpeg, .png" required>
            <input type=submit name=img3 value="Upload Image">
       </form>
       <form action="/new_img" method="post" enctype="multipart/form-data">
            <img src="<%- profile.img4 %>" width="300" height="200"><BR \>
            <input type=file name=file accept=".jpg, .jpeg, .png" required>
            <input type=submit name=img4 value="Upload Image">
       </form>
       <form action="/new_img" method="post" enctype="multipart/form-data">
            <img src="<%- profile.img5 %>" width="300" height="200"><BR \>
            <input type=file name=file accept=".jpg, .jpeg, .png" required>
            <input type=submit name=img5 value="Upload Image">
       </form>
   </div>
   <h3>Your account</h3>
   <div class="account">
       <form action="/profile" method="post">
            <select class="profilebox" name="edit" id='modifyuserlist' onchange="placeholder()">
                <option value='1'> Login </option>
                <option value='2'> Firstname </option>
                <option value='3'> Lastname </option>
                <option value='4'> Password </option>
                <option value='5'> Email </option>
            </select>
            <input class="profilebox" type="text" name="changement" id='modifyuser' required>
            <input class="profilebox" type="text" name="confirm" placeholder=Confirm id='confirm' required>
            <input class="profilebutton" type="submit" name="general" value="Modify" id="change" disabled="disabled">
        </form>

    </div>
    <h3>Characteristics</h3>
    <div class="caracs">
        <form action="/profile" method="post">
            Sexual Orientation :
             <select class="profilebox" name="orientation">
                <option> Select Sexual Orientation </option>
                <option> Heterosexual </option>
                <option> Bisexual </option>
                <option> Bicurious </option>
                <option> Homosexual </option>
                <option> Pansexual </option>
                <option> Demisexual </option>
                <option> Heteronormative </option>
                <option> Polyamorous </option>
                <option> Grey Asexual </option>
                <option> Asexual </option>
                <option> Questioning </option>
                <option> Other </option>
            </select>
            <input class="profilebutton"  type="submit" name="sub_orientation" value="Modify">
        </form>
        <form action="/profile" method="post">
        Your Gender :
        <select class="profilebox" name="gender">
            <option> Select Gender </option>
            <option> Male </option>
            <option> Female </option>
            <option> Trans Male </option>
            <option> Trans Female </option>
            <option> Agender </option>
            <option> Cisgender </option>
            <option> Genderfluid </option>
            <option> Genderqueer </option>
            <option> Intersex </option>
            <option> Gender non-conforming </option>
            <option> Other </option>
        </select>
        <input class="profilebutton" type="submit" name="sub_gender" value="Modify">
        </form>
        <!--pour la bio faire du js pour le countdown des characteres
        faut rester sur un maxlength de 200 sinon le sql part en couille -->
        <div class="bio">
        Your Biography:
        <form action="/profile" method="post">
            <textarea class="profilebigbox" type=text name=bio placeholder='Your biography' maxlength=200 required><%- profile.bio %></textarea>
            <input class="profilebutton" type=submit name=sub_bio value="Update Biography">
        </form></div>
    
</div>
<h3>Tags</h3>
    <div class="tags">
    <form action="/profile" method="post">
            <input class="profilebox" type="text" name="newtag" id='newtag'>
            <input class="profilebutton" type="submit" name="general" value="Ajouter" id="tagbutton" disabled="disabled">
    </form><br/><br/>
<div class="actualtags">
       <%
       if (typeof profile && profile.tag) { i = 0
       while (profile.tag[i])
         {
            %>
            <div class="tag"><form action="deletetag" method="post"><strong>#<%= profile.tag[i++].tag %></strong><input type="image" src="croix.svg" id="buttondeletetag"></form></div><%
         }}
         %>
     </div>
    </div>
</div>
</body></html>
<script>

    change = document.getElementById('change');
    modif = document.getElementById('modifyuser');
    confirm = document.getElementById('confirm');
    tagbutton = document.getElementById('tagbutton');
    newtag = document.getElementById('newtag');
    verif();
    function verif() {
    setTimeout(verif,500);
    if (modif.value != "" && confirm.value != "")
        change.disabled = false;
    else
        change.disabled = true;
    if (newtag.value != "")
        tagbutton.disabled = false;
    else
        tagbutton.disabled = true; }

    window.onload = placeholder();
    function placeholder() {
        var s = document.getElementById("modifyuserlist").value;
        if (s == '1')
            var i = '<%- profile.login %>'
        else if (s == '2')
            var i = '<%- profile.firstname %>'
        else if (s == '3')
            var i = '<%- profile.lastname %>'
        else if (s == '4')
        {
            var i = 'New Password'
            modif.type = "Password";
            confirm.type = "Password";
        }
        else if (s == '5')
            var i = '<%- profile.email %>'
        if (s != '4')
        {
            modif.type = "text";
            confirm.type = "text";
        }
        document.getElementById("modifyuser").placeholder = i; }
</script>